{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _class;\n\nvar _autobindDecorator = require('autobind-decorator');\n\nvar _autobindDecorator2 = _interopRequireDefault(_autobindDecorator);\n\nvar _Checkbox = require('../../Checkbox');\n\nvar _Checkbox2 = _interopRequireDefault(_Checkbox);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _createId = require('../../utils/createId');\n\nvar _createId2 = _interopRequireDefault(_createId);\n\nvar _FocusManager = require('../../utils/FocusManager');\n\nvar _FocusManager2 = _interopRequireDefault(_FocusManager);\n\nvar _focusRing = require('../../utils/focusRing');\n\nvar _focusRing2 = _interopRequireDefault(_focusRing);\n\nvar _intl = require('../../utils/intl');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _TableCell = require('./TableCell');\n\nvar _TableCell2 = _interopRequireDefault(_TableCell);\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar intlMessages = {\n  'cs-CZ': _interopRequireDefault(require('./../intl/cs-CZ.json')).default,\n  'da-DK': _interopRequireDefault(require('./../intl/da-DK.json')).default,\n  'de-DE': _interopRequireDefault(require('./../intl/de-DE.json')).default,\n  'en-US': _interopRequireDefault(require('./../intl/en-US.json')).default,\n  'es-ES': _interopRequireDefault(require('./../intl/es-ES.json')).default,\n  'fi-FI': _interopRequireDefault(require('./../intl/fi-FI.json')).default,\n  'fr-FR': _interopRequireDefault(require('./../intl/fr-FR.json')).default,\n  'it-IT': _interopRequireDefault(require('./../intl/it-IT.json')).default,\n  'ja-JP': _interopRequireDefault(require('./../intl/ja-JP.json')).default,\n  'ko-KR': _interopRequireDefault(require('./../intl/ko-KR.json')).default,\n  'nb-NO': _interopRequireDefault(require('./../intl/nb-NO.json')).default,\n  'nl-NL': _interopRequireDefault(require('./../intl/nl-NL.json')).default,\n  'pl-PL': _interopRequireDefault(require('./../intl/pl-PL.json')).default,\n  'pt-BR': _interopRequireDefault(require('./../intl/pt-BR.json')).default,\n  'ru-RU': _interopRequireDefault(require('./../intl/ru-RU.json')).default,\n  'sv-SE': _interopRequireDefault(require('./../intl/sv-SE.json')).default,\n  'tr-TR': _interopRequireDefault(require('./../intl/tr-TR.json')).default,\n  'zh-CN': _interopRequireDefault(require('./../intl/zh-CN.json')).default,\n  'zh-TW': _interopRequireDefault(require('./../intl/zh-TW.json')).default\n};\nvar formatMessage = (0, _intl.messageFormatter)(intlMessages);\nvar FOCUSABLE_SELECTOR = '[tabIndex]:not([disabled]):not([aria-disabled])';\n\nvar TableRow = (0, _focusRing2.default)(_class = (0, _autobindDecorator2.default)(_class = function (_React$Component) {\n  _inherits(TableRow, _React$Component);\n\n  function TableRow(props) {\n    _classCallCheck(this, TableRow);\n\n    var _this = _possibleConstructorReturn(this, (TableRow.__proto__ || Object.getPrototypeOf(TableRow)).call(this, props));\n\n    _this.state = {\n      focused: false\n    };\n    _this.rowId = (0, _createId2.default)();\n    return _this;\n  }\n\n  _createClass(TableRow, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if ('focused' in nextProps) {\n        this.setState({\n          focused: nextProps.focused\n        });\n      }\n    }\n    /**\n     * Sets focus to the table row DOM element.\n     */\n\n  }, {\n    key: 'focus',\n    value: function focus() {\n      if (this.row) {\n        this.row.focus();\n      }\n    }\n  }, {\n    key: 'onCellClick',\n    value: function onCellClick(column, isDoubleClick) {\n      var rowIndex = null;\n\n      if (this.props.collectionView) {\n        var indexPath = this.props.collectionView.indexPathForComponent(this);\n        rowIndex = indexPath && indexPath.index;\n      }\n\n      if (!isDoubleClick && this.props.onCellClick) {\n        this.props.onCellClick(column, rowIndex);\n      }\n\n      if (isDoubleClick && this.props.onCellDoubleClick) {\n        this.props.onCellDoubleClick(column, rowIndex);\n      }\n    }\n    /**\n     * Handle click event on checkbox to toggle selection of row using keyboard.\n     * @param {MouseEvent} e Click event\n     */\n\n  }, {\n    key: 'onCheckboxClick',\n    value: function onCheckboxClick(e) {\n      // force selection of item in the selection view\n      var _props = this.props,\n          collectionView = _props.collectionView,\n          isHeaderRow = _props.isHeaderRow;\n\n      if (collectionView && !isHeaderRow) {\n        var indexPath = collectionView.indexPathForComponent(this);\n        collectionView.selectItem(indexPath, true, e.shiftKey, true);\n      }\n    }\n  }, {\n    key: 'onMouseDown',\n    value: function onMouseDown(event) {\n      // Stop propagation on mouse down if the target is focusable.\n      // Otherwise, collection-view will try to focus the row instead.\n      if (event.target.matches(FOCUSABLE_SELECTOR) && event.target !== this.row) {\n        event.stopPropagation();\n      }\n    }\n    /**\n     * Handle key down event on a row, to navigate between focusable descendant\n     * elements using the left or right arrow keys, or to navigate between the\n     * header row and the body using the down or up arrow keys.\n     * @param {KeyboardEvent} event A keydown event\n     */\n\n  }, {\n    key: 'onKeyDown',\n    value: function onKeyDown(event) {\n      var _props2 = this.props,\n          collectionView = _props2.collectionView,\n          isHeaderRow = _props2.isHeaderRow,\n          onSelectChange = _props2.onSelectChange;\n      var key = event.key;\n      var focusable = null;\n\n      switch (key) {\n        case 'ArrowUp':\n        case 'Up':\n          if (!isHeaderRow && collectionView) {\n            var indexPath = collectionView.indexPathForComponent(this);\n\n            if (indexPath && indexPath.section === 0 && indexPath.index === 0) {\n              focusable = collectionView.getDOMNode().previousSibling.querySelector(FOCUSABLE_SELECTOR);\n            }\n          }\n\n          break;\n\n        case 'ArrowDown':\n        case 'Down':\n          if (isHeaderRow) {\n            focusable = this.row.parentNode.nextSibling.querySelector(FOCUSABLE_SELECTOR);\n          }\n\n          break;\n\n        case 'a':\n          if ((event.metaKey || event.ctrlKey) && onSelectChange) {\n            onSelectChange(true);\n            event.preventDefault();\n            event.stopPropagation();\n          }\n\n          break;\n\n        case 'Escape':\n        case 'Esc':\n          if (onSelectChange) {\n            onSelectChange(false);\n          }\n\n          break;\n\n        case 'Enter':\n        case ' ':\n          // Stop propagation on enter and space keys if the target is focusable.\n          // Otherwise, collection-view will try to focus the row instead.\n          if (event.target.matches(FOCUSABLE_SELECTOR) && event.target !== this.row) {\n            event.stopPropagation();\n          }\n\n          break;\n      }\n\n      if (focusable) {\n        event.preventDefault();\n        event.stopPropagation();\n        focusable.focus();\n      }\n    }\n    /**\n     * Handles focus event on row, setting focused state and refreshing visible items in the collection.\n     */\n\n  }, {\n    key: 'onFocus',\n    value: function onFocus() {\n      this.setState({\n        focused: true\n      });\n    }\n    /**\n     * Handles blur event on row, setting focused state and refreshing visible items in the collection.\n     */\n\n  }, {\n    key: 'onBlur',\n    value: function onBlur() {\n      this.setState({\n        focused: false\n      });\n    }\n  }, {\n    key: 'getAriaLabelledby',\n    value: function getAriaLabelledby() {\n      var _props3 = this.props,\n          columns = _props3.columns,\n          isHeaderRow = _props3.isHeaderRow,\n          allowsSelection = _props3.allowsSelection,\n          _props3$id = _props3.id,\n          id = _props3$id === undefined ? this.rowId : _props3$id,\n          tableId = _props3.tableId;\n      var ariaLabelledby = null;\n\n      if (isHeaderRow && tableId) {\n        id = [tableId, 0].join('-');\n      }\n\n      ariaLabelledby = columns.map(function (column, i) {\n        if (allowsSelection) {\n          i += 1;\n        }\n\n        if (column.announce !== false) {\n          return [[tableId, 0, i].join('-'), [id, i].join('-')].join(' ');\n        }\n      }).join(' ');\n      return !isHeaderRow ? ariaLabelledby : null;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props4 = this.props,\n          columns = _props4.columns,\n          renderCell = _props4.renderCell,\n          _props4$selected = _props4.selected,\n          selected = _props4$selected === undefined ? false : _props4$selected,\n          _props4$focused = _props4.focused,\n          focused = _props4$focused === undefined ? false : _props4$focused,\n          isHeaderRow = _props4.isHeaderRow,\n          allowsSelection = _props4.allowsSelection,\n          onSelectChange = _props4.onSelectChange,\n          _props4$id = _props4.id,\n          id = _props4$id === undefined ? this.rowId : _props4$id,\n          tableId = _props4.tableId,\n          _props4$layoutInfo = _props4.layoutInfo,\n          layoutInfo = _props4$layoutInfo === undefined ? {} : _props4$layoutInfo,\n          collectionView = _props4.collectionView,\n          allowsMultipleSelection = _props4.allowsMultipleSelection,\n          otherProps = _objectWithoutProperties(_props4, ['columns', 'renderCell', 'selected', 'focused', 'isHeaderRow', 'allowsSelection', 'onSelectChange', 'id', 'tableId', 'layoutInfo', 'collectionView', 'allowsMultipleSelection']);\n\n      var index = layoutInfo.index;\n      var className = (0, _classnames2.default)('react-spectrum-TableView-row', {\n        'spectrum-Table-head': isHeaderRow,\n        'spectrum-Table-row': !isHeaderRow,\n        'is-selected': selected,\n        'is-focused': focused && this.state.focused,\n        'is-drop-target': this.props['drop-target']\n      });\n      var ariaRowIndex = null;\n      var tabIndex = null;\n      var indeterminate = null;\n\n      if (isHeaderRow && tableId) {\n        id = [tableId, 0].join('-');\n      }\n\n      if (collectionView) {\n        if (!isHeaderRow) {\n          ariaRowIndex = index;\n\n          if (ariaRowIndex !== null) {\n            ariaRowIndex += 2;\n          } // determine appropriate tabIndex for row depending on whether it is focused.\n\n\n          tabIndex = focused || !collectionView.focusedIndexPath ? 0 : -1;\n        } else {\n          indeterminate = !selected && collectionView.selectedIndexPaths.length > 0;\n        }\n      }\n\n      delete otherProps.onCellClick;\n      delete otherProps.onCellDoubleClick;\n      delete otherProps.onResize;\n      delete otherProps.reusableView;\n      delete otherProps.setSelectAll;\n      var checkboxCellClassNames = (0, _classnames2.default)('spectrum-Table-checkboxCell', 'react-spectrum-TableView-checkboxCell');\n      return _react2.default.createElement(_FocusManager2.default, {\n        itemSelector: FOCUSABLE_SELECTOR,\n        orientation: 'horizontal',\n        manageTabIndex: false,\n        includeSelf: true,\n        ignorePageUpPageDown: true\n      }, _react2.default.createElement('div', _extends({\n        className: className,\n        ref: function ref(row) {\n          return _this2.row = row;\n        },\n        id: id,\n        role: 'row',\n        tabIndex: tabIndex,\n        'aria-selected': allowsSelection ? selected : null,\n        'aria-rowindex': isHeaderRow ? 1 : ariaRowIndex,\n        'aria-labelledby': this.getAriaLabelledby(),\n        onFocus: this.onFocus,\n        onBlur: this.onBlur,\n        onKeyDown: this.onKeyDown,\n        onMouseDown: this.onMouseDown\n      }, otherProps), allowsSelection && _react2.default.createElement(_TableCell2.default, {\n        id: [id, 0].join('-'),\n        isHeaderRow: isHeaderRow,\n        className: checkboxCellClassNames,\n        'aria-colindex': '1',\n        'aria-label': isHeaderRow && allowsMultipleSelection === false ? formatMessage('Select') : null,\n        focused: focused\n      }, _react2.default.createElement(_Checkbox2.default, {\n        className: 'spectrum-Table-checkbox',\n        checked: selected,\n        indeterminate: indeterminate,\n        onChange: onSelectChange,\n        onClick: this.onCheckboxClick,\n        onMouseDown: function onMouseDown(e) {\n          return e.stopPropagation();\n        },\n        tabIndex: isHeaderRow || focused ? 0 : -1,\n        title: isHeaderRow ? formatMessage('Select All') : formatMessage('Select'),\n        style: isHeaderRow && !allowsMultipleSelection ? {\n          visibility: 'hidden'\n        } : null\n      })), columns.map(function (column, i) {\n        return _react2.default.cloneElement(renderCell(column, i, focused), {\n          key: i,\n          id: [id, allowsSelection ? i + 1 : i].join('-'),\n          'aria-colindex': allowsSelection ? i + 2 : i + 1,\n          onClick: _this2.onCellClick.bind(_this2, column, false),\n          onDoubleClick: _this2.onCellClick.bind(_this2, column, true),\n          rowFocused: focused\n        });\n      })));\n    }\n  }]);\n\n  return TableRow;\n}(_react2.default.Component)) || _class) || _class;\n\nexports.default = TableRow;","map":{"version":3,"sources":["/Users/rvang/Desktop/Spectrum/testapp/src/Prototypes/TableClickAffordance/Proto1/Elements/TableView/js/TableRow.js"],"names":["Object","defineProperty","exports","value","default","undefined","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_class","_autobindDecorator","require","_autobindDecorator2","_interopRequireDefault","_Checkbox","_Checkbox2","_classnames","_classnames2","_createId","_createId2","_FocusManager","_FocusManager2","_focusRing","_focusRing2","_intl","_react","_react2","_TableCell","_TableCell2","_objectWithoutProperties","obj","keys","indexOf","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","__esModule","intlMessages","formatMessage","messageFormatter","FOCUSABLE_SELECTOR","TableRow","_React$Component","_this","getPrototypeOf","state","focused","rowId","componentWillReceiveProps","nextProps","setState","focus","row","onCellClick","column","isDoubleClick","rowIndex","collectionView","indexPath","indexPathForComponent","index","onCellDoubleClick","onCheckboxClick","e","_props","isHeaderRow","selectItem","shiftKey","onMouseDown","event","matches","stopPropagation","onKeyDown","_props2","onSelectChange","focusable","section","getDOMNode","previousSibling","querySelector","parentNode","nextSibling","metaKey","ctrlKey","preventDefault","onFocus","onBlur","getAriaLabelledby","_props3","columns","allowsSelection","_props3$id","id","tableId","ariaLabelledby","join","map","announce","render","_this2","_props4","renderCell","_props4$selected","selected","_props4$focused","_props4$id","_props4$layoutInfo","layoutInfo","allowsMultipleSelection","otherProps","className","ariaRowIndex","tabIndex","indeterminate","focusedIndexPath","selectedIndexPaths","onResize","reusableView","setSelectAll","checkboxCellClassNames","createElement","itemSelector","orientation","manageTabIndex","includeSelf","ignorePageUpPageDown","ref","role","checked","onChange","onClick","title","style","visibility","cloneElement","bind","onDoubleClick","rowFocused","Component"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _class;\n\nvar _autobindDecorator = require('autobind-decorator');\n\nvar _autobindDecorator2 = _interopRequireDefault(_autobindDecorator);\n\nvar _Checkbox = require('../../Checkbox');\n\nvar _Checkbox2 = _interopRequireDefault(_Checkbox);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _createId = require('../../utils/createId');\n\nvar _createId2 = _interopRequireDefault(_createId);\n\nvar _FocusManager = require('../../utils/FocusManager');\n\nvar _FocusManager2 = _interopRequireDefault(_FocusManager);\n\nvar _focusRing = require('../../utils/focusRing');\n\nvar _focusRing2 = _interopRequireDefault(_focusRing);\n\nvar _intl = require('../../utils/intl');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _TableCell = require('./TableCell');\n\nvar _TableCell2 = _interopRequireDefault(_TableCell);\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar intlMessages = {\n  'cs-CZ': _interopRequireDefault(require('./../intl/cs-CZ.json')).default,\n  'da-DK': _interopRequireDefault(require('./../intl/da-DK.json')).default,\n  'de-DE': _interopRequireDefault(require('./../intl/de-DE.json')).default,\n  'en-US': _interopRequireDefault(require('./../intl/en-US.json')).default,\n  'es-ES': _interopRequireDefault(require('./../intl/es-ES.json')).default,\n  'fi-FI': _interopRequireDefault(require('./../intl/fi-FI.json')).default,\n  'fr-FR': _interopRequireDefault(require('./../intl/fr-FR.json')).default,\n  'it-IT': _interopRequireDefault(require('./../intl/it-IT.json')).default,\n  'ja-JP': _interopRequireDefault(require('./../intl/ja-JP.json')).default,\n  'ko-KR': _interopRequireDefault(require('./../intl/ko-KR.json')).default,\n  'nb-NO': _interopRequireDefault(require('./../intl/nb-NO.json')).default,\n  'nl-NL': _interopRequireDefault(require('./../intl/nl-NL.json')).default,\n  'pl-PL': _interopRequireDefault(require('./../intl/pl-PL.json')).default,\n  'pt-BR': _interopRequireDefault(require('./../intl/pt-BR.json')).default,\n  'ru-RU': _interopRequireDefault(require('./../intl/ru-RU.json')).default,\n  'sv-SE': _interopRequireDefault(require('./../intl/sv-SE.json')).default,\n  'tr-TR': _interopRequireDefault(require('./../intl/tr-TR.json')).default,\n  'zh-CN': _interopRequireDefault(require('./../intl/zh-CN.json')).default,\n  'zh-TW': _interopRequireDefault(require('./../intl/zh-TW.json')).default\n};\n\n\nvar formatMessage = (0, _intl.messageFormatter)(intlMessages);\n\nvar FOCUSABLE_SELECTOR = '[tabIndex]:not([disabled]):not([aria-disabled])';\n\nvar TableRow = (0, _focusRing2.default)(_class = (0, _autobindDecorator2.default)(_class = function (_React$Component) {\n  _inherits(TableRow, _React$Component);\n\n  function TableRow(props) {\n    _classCallCheck(this, TableRow);\n\n    var _this = _possibleConstructorReturn(this, (TableRow.__proto__ || Object.getPrototypeOf(TableRow)).call(this, props));\n\n    _this.state = {\n      focused: false\n    };\n\n    _this.rowId = (0, _createId2.default)();\n    return _this;\n  }\n\n  _createClass(TableRow, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if ('focused' in nextProps) {\n        this.setState({\n          focused: nextProps.focused\n        });\n      }\n    }\n\n    /**\n     * Sets focus to the table row DOM element.\n     */\n\n  }, {\n    key: 'focus',\n    value: function focus() {\n      if (this.row) {\n        this.row.focus();\n      }\n    }\n  }, {\n    key: 'onCellClick',\n    value: function onCellClick(column, isDoubleClick) {\n      var rowIndex = null;\n\n      if (this.props.collectionView) {\n        var indexPath = this.props.collectionView.indexPathForComponent(this);\n        rowIndex = indexPath && indexPath.index;\n      }\n\n      if (!isDoubleClick && this.props.onCellClick) {\n        this.props.onCellClick(column, rowIndex);\n      }\n\n      if (isDoubleClick && this.props.onCellDoubleClick) {\n        this.props.onCellDoubleClick(column, rowIndex);\n      }\n    }\n\n    /**\n     * Handle click event on checkbox to toggle selection of row using keyboard.\n     * @param {MouseEvent} e Click event\n     */\n\n  }, {\n    key: 'onCheckboxClick',\n    value: function onCheckboxClick(e) {\n      // force selection of item in the selection view\n      var _props = this.props,\n          collectionView = _props.collectionView,\n          isHeaderRow = _props.isHeaderRow;\n\n\n      if (collectionView && !isHeaderRow) {\n        var indexPath = collectionView.indexPathForComponent(this);\n\n        collectionView.selectItem(indexPath, true, e.shiftKey, true);\n      }\n    }\n  }, {\n    key: 'onMouseDown',\n    value: function onMouseDown(event) {\n      // Stop propagation on mouse down if the target is focusable.\n      // Otherwise, collection-view will try to focus the row instead.\n      if (event.target.matches(FOCUSABLE_SELECTOR) && event.target !== this.row) {\n        event.stopPropagation();\n      }\n    }\n\n    /**\n     * Handle key down event on a row, to navigate between focusable descendant\n     * elements using the left or right arrow keys, or to navigate between the\n     * header row and the body using the down or up arrow keys.\n     * @param {KeyboardEvent} event A keydown event\n     */\n\n  }, {\n    key: 'onKeyDown',\n    value: function onKeyDown(event) {\n      var _props2 = this.props,\n          collectionView = _props2.collectionView,\n          isHeaderRow = _props2.isHeaderRow,\n          onSelectChange = _props2.onSelectChange;\n      var key = event.key;\n\n      var focusable = null;\n\n      switch (key) {\n        case 'ArrowUp':\n        case 'Up':\n          if (!isHeaderRow && collectionView) {\n            var indexPath = collectionView.indexPathForComponent(this);\n            if (indexPath && indexPath.section === 0 && indexPath.index === 0) {\n              focusable = collectionView.getDOMNode().previousSibling.querySelector(FOCUSABLE_SELECTOR);\n            }\n          }\n          break;\n        case 'ArrowDown':\n        case 'Down':\n          if (isHeaderRow) {\n            focusable = this.row.parentNode.nextSibling.querySelector(FOCUSABLE_SELECTOR);\n          }\n          break;\n        case 'a':\n          if ((event.metaKey || event.ctrlKey) && onSelectChange) {\n            onSelectChange(true);\n            event.preventDefault();\n            event.stopPropagation();\n          }\n          break;\n        case 'Escape':\n        case 'Esc':\n          if (onSelectChange) {\n            onSelectChange(false);\n          }\n          break;\n        case 'Enter':\n        case ' ':\n          // Stop propagation on enter and space keys if the target is focusable.\n          // Otherwise, collection-view will try to focus the row instead.\n          if (event.target.matches(FOCUSABLE_SELECTOR) && event.target !== this.row) {\n            event.stopPropagation();\n          }\n          break;\n      }\n\n      if (focusable) {\n        event.preventDefault();\n        event.stopPropagation();\n        focusable.focus();\n      }\n    }\n\n    /**\n     * Handles focus event on row, setting focused state and refreshing visible items in the collection.\n     */\n\n  }, {\n    key: 'onFocus',\n    value: function onFocus() {\n      this.setState({ focused: true });\n    }\n\n    /**\n     * Handles blur event on row, setting focused state and refreshing visible items in the collection.\n     */\n\n  }, {\n    key: 'onBlur',\n    value: function onBlur() {\n      this.setState({ focused: false });\n    }\n  }, {\n    key: 'getAriaLabelledby',\n    value: function getAriaLabelledby() {\n      var _props3 = this.props,\n          columns = _props3.columns,\n          isHeaderRow = _props3.isHeaderRow,\n          allowsSelection = _props3.allowsSelection,\n          _props3$id = _props3.id,\n          id = _props3$id === undefined ? this.rowId : _props3$id,\n          tableId = _props3.tableId;\n\n      var ariaLabelledby = null;\n\n      if (isHeaderRow && tableId) {\n        id = [tableId, 0].join('-');\n      }\n\n      ariaLabelledby = columns.map(function (column, i) {\n        if (allowsSelection) {\n          i += 1;\n        }\n        if (column.announce !== false) {\n          return [[tableId, 0, i].join('-'), [id, i].join('-')].join(' ');\n        }\n      }).join(' ');\n\n      return !isHeaderRow ? ariaLabelledby : null;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props4 = this.props,\n          columns = _props4.columns,\n          renderCell = _props4.renderCell,\n          _props4$selected = _props4.selected,\n          selected = _props4$selected === undefined ? false : _props4$selected,\n          _props4$focused = _props4.focused,\n          focused = _props4$focused === undefined ? false : _props4$focused,\n          isHeaderRow = _props4.isHeaderRow,\n          allowsSelection = _props4.allowsSelection,\n          onSelectChange = _props4.onSelectChange,\n          _props4$id = _props4.id,\n          id = _props4$id === undefined ? this.rowId : _props4$id,\n          tableId = _props4.tableId,\n          _props4$layoutInfo = _props4.layoutInfo,\n          layoutInfo = _props4$layoutInfo === undefined ? {} : _props4$layoutInfo,\n          collectionView = _props4.collectionView,\n          allowsMultipleSelection = _props4.allowsMultipleSelection,\n          otherProps = _objectWithoutProperties(_props4, ['columns', 'renderCell', 'selected', 'focused', 'isHeaderRow', 'allowsSelection', 'onSelectChange', 'id', 'tableId', 'layoutInfo', 'collectionView', 'allowsMultipleSelection']);\n\n      var index = layoutInfo.index;\n\n      var className = (0, _classnames2.default)('react-spectrum-TableView-row', {\n        'spectrum-Table-head': isHeaderRow,\n        'spectrum-Table-row': !isHeaderRow,\n        'is-selected': selected,\n        'is-focused': focused && this.state.focused,\n        'is-drop-target': this.props['drop-target']\n      });\n      var ariaRowIndex = null;\n      var tabIndex = null;\n      var indeterminate = null;\n\n      if (isHeaderRow && tableId) {\n        id = [tableId, 0].join('-');\n      }\n\n      if (collectionView) {\n        if (!isHeaderRow) {\n          ariaRowIndex = index;\n          if (ariaRowIndex !== null) {\n            ariaRowIndex += 2;\n          }\n\n          // determine appropriate tabIndex for row depending on whether it is focused.\n          tabIndex = focused || !collectionView.focusedIndexPath ? 0 : -1;\n        } else {\n          indeterminate = !selected && collectionView.selectedIndexPaths.length > 0;\n        }\n      }\n\n      delete otherProps.onCellClick;\n      delete otherProps.onCellDoubleClick;\n      delete otherProps.onResize;\n      delete otherProps.reusableView;\n      delete otherProps.setSelectAll;\n\n      var checkboxCellClassNames = (0, _classnames2.default)('spectrum-Table-checkboxCell', 'react-spectrum-TableView-checkboxCell');\n\n      return _react2.default.createElement(\n        _FocusManager2.default,\n        { itemSelector: FOCUSABLE_SELECTOR, orientation: 'horizontal', manageTabIndex: false, includeSelf: true, ignorePageUpPageDown: true },\n        _react2.default.createElement(\n          'div',\n          _extends({\n            className: className,\n            ref: function ref(row) {\n              return _this2.row = row;\n            },\n            id: id,\n            role: 'row',\n            tabIndex: tabIndex,\n            'aria-selected': allowsSelection ? selected : null,\n            'aria-rowindex': isHeaderRow ? 1 : ariaRowIndex,\n            'aria-labelledby': this.getAriaLabelledby(),\n            onFocus: this.onFocus,\n            onBlur: this.onBlur,\n            onKeyDown: this.onKeyDown,\n            onMouseDown: this.onMouseDown\n          }, otherProps),\n          allowsSelection && _react2.default.createElement(\n            _TableCell2.default,\n            {\n              id: [id, 0].join('-'),\n              isHeaderRow: isHeaderRow,\n              className: checkboxCellClassNames,\n              'aria-colindex': '1',\n              'aria-label': isHeaderRow && allowsMultipleSelection === false ? formatMessage('Select') : null,\n              focused: focused },\n            _react2.default.createElement(_Checkbox2.default, {\n              className: 'spectrum-Table-checkbox',\n              checked: selected,\n              indeterminate: indeterminate,\n              onChange: onSelectChange,\n              onClick: this.onCheckboxClick,\n              onMouseDown: function onMouseDown(e) {\n                return e.stopPropagation();\n              },\n              tabIndex: isHeaderRow || focused ? 0 : -1,\n              title: isHeaderRow ? formatMessage('Select All') : formatMessage('Select'),\n              style: isHeaderRow && !allowsMultipleSelection ? { visibility: 'hidden' } : null })\n          ),\n          columns.map(function (column, i) {\n            return _react2.default.cloneElement(renderCell(column, i, focused), {\n              key: i,\n              id: [id, allowsSelection ? i + 1 : i].join('-'),\n              'aria-colindex': allowsSelection ? i + 2 : i + 1,\n              onClick: _this2.onCellClick.bind(_this2, column, false),\n              onDoubleClick: _this2.onCellClick.bind(_this2, column, true),\n              rowFocused: focused\n            });\n          })\n        )\n      );\n    }\n  }]);\n\n  return TableRow;\n}(_react2.default.Component)) || _class) || _class;\n\nexports.default = TableRow;"]},"metadata":{},"sourceType":"module"}